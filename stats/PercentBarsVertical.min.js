var BarChartVertical=function(d,c){var a={id:"canvas",axisOrigin:[30,25],barHeight:100,barWidth:32,barChartHeight:20,barChartWidth:15,background:"#F9F9F9",textFromAxisDist:[30,25],scoreFromBarDist:10,key:"bar",font:{family:"Helvetica"},greenFill:{color:"#42E73A",opacity:0.8},redFill:{color:"#f03",opacity:0.6},barStroke:{stroke:"black",width:1.5,linejoin:"round",opacity:0.7},gridStroke:{width:1,opacity:0.6},borderStroke:{width:1,dasharray:"5,5",opacity:0.6},axis_prec:25};for(var b in a){if(typeof c[b]=="undefined"){c[b]=a[b]}}this.id=c.id;this.data=d;this.getValue=c.getValue;this.axisOrigin=c.axisOrigin;this.barHeight=c.barHeight;this.barWidth=c.barWidth;this.barChartHeight=c.barChartHeight;this.barChartWidth=c.barChartWidth;this.click=c.click;this.textFromAxisDist=c.textFromAxisDist;this.scoreFromBarDist=c.scoreFromBarDist;this.font=c.font;this.greenFill=c.greenFill;this.redFill=c.redFill;this.key=c.key;this.barStroke=c.barStroke;this.gridStroke=c.gridStroke;this.borderStroke=c.borderStroke;this.axis_prec=c.axis_prec;this.numBars=this.data.length;this.svg=c.svg?c.svg:SVG(this.id).size(c.Width?c.Width:this.barWidth*this.numBars+this.axisOrigin[0]+40,c.Height?c.Height:this.barHeight+this.axisOrigin[1]+40);this.drawBar=function(h,k){h.chart={};var j=this.axisOrigin[0]+(this.barWidth)*(k-0.5);var g=function(){h.chart.masterHit.animate(1000,"<>",10).opacity(0.4)};var e=function(){h.chart.masterHit.animate(1000,"<>",10).opacity(0)};h.chart.masterHit=this.svg.rect(this.barWidth,this.barHeight).opacity(0).y(this.axisOrigin[1]).cx(j).remember(this.key,h).mouseenter(g).mouseleave(e);h.chart.red=this.svg.rect(this.barChartWidth,this.barHeight).fill(this.redFill).y(this.axisOrigin[1]).cx(j).remember(this.key,h).mouseenter(g).mouseleave(e);var f=(h.value/100)*this.barHeight;h.chart.green=this.svg.rect((this.barChartWidth),f).fill(this.greenFill).y(this.axisOrigin[1]+this.barHeight-f).cx(j).remember(this.key,h).mouseenter(g).mouseleave(e);this.svg.text(h.label).font(this.font).y(this.axisOrigin[0]+this.barHeight+this.scoreFromBarDist).cx(j);this.svg.text(h.value+"%").font(this.font).y(this.axisOrigin[0]+this.textFromAxisDist).cx(j);this.svg.line(this.axisOrigin[0]+this.barWidth*k,this.axisOrigin[1],this.barWidth*k+this.axisOrigin[0],this.barHeight+this.axisOrigin[1]).stroke(this.borderStroke);this.svg.polyline([[j-this.barChartWidth/2,this.axisOrigin[1]],[j-this.barChartWidth/2,this.axisOrigin[1]+this.barHeight],[j+this.barChartWidth/2,this.axisOrigin[1]+this.barHeight],[j+this.barChartWidth/2,this.axisOrigin[1]]]).fill("none").stroke(this.barStroke);if(this.click){h.chart.masterHit.click(this.click);h.chart.red.click(this.click);h.chart.green.click(this.click)}};this.drawBars=function(){var g=1;for(var e in this.data){var f=this.data[e];this.drawBar(f,g++)}};this.drawGrid=function(){var e=(this.barHeight*this.axis_prec)/100;for(i=0;i<=this.barHeight;i+=e){this.svg.line(this.axisOrigin[0],this.axisOrigin[1]+i,this.axisOrigin[0]+this.barWidth*this.numBars,this.axisOrigin[1]+i).stroke(this.gridStroke);this.svg.text(""+((i/e)*this.axis_prec)+"%").x(this.barWidth*this.numBars+this.axisOrigin[0]+5).cy(this.axisOrigin[1]+i).font(this.font)}};this.drawAxis=function(){this.svg.line(this.axisOrigin[0]+this.barWidth*this.numBars,this.axisOrigin[1],this.axisOrigin[0]+this.barWidth*this.numBars,this.barHeight+this.axisOrigin[1]).stroke({width:1});this.svg.line(this.axisOrigin[0],this.axisOrigin[1]+this.barHeight,this.barWidth*this.numBars+this.axisOrigin[0]+1,this.axisOrigin[1]+this.barHeight).stroke({width:1})};this.remove=function(){$(this.id+" svg").remove()};this.draw=function(){this.drawGrid();this.drawBars();this.drawAxis()};return this};